/**
 * wp-api-angularjs - WordPress WP-API client for AngularJs
 * @version v1.0.0-rc3
 * @author shprink <contact@julienrenaux.fr>
 * @link https://github.com/shprink/wp-api-angularjs
 * @license MIT
 */
!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){n(3),n(9),e.exports=angular.module("wp-api-angularjs",[n(1).name,n(2).name])},function(e){e.exports=angular.module("wp-api-angularjs.provider",["restangular"]).provider("WpApi",["RestangularProvider",function(e){var t=e;this.getRestangularProvider=function(){return t},this.$get=function(){return t}}])},function(e,t,n){e.exports=angular.module("wp-api-angularjs.services",[n(5).name,n(6).name,n(7).name,n(8).name])},function(e,t,n){(function(t){e.exports=t._=n(4)}).call(t,function(){return this}())},function(e,t){var n,r;(function(){var a=this,i=a._,u=Array.prototype,s=Object.prototype,o=Function.prototype,l=u.push,c=u.slice,f=u.concat,d=s.toString,p=s.hasOwnProperty,g=Array.isArray,h=Object.keys,m=o.bind,v=function(e){return e instanceof v?e:this instanceof v?void(this._wrapped=e):new v(e)};"undefined"!=typeof e&&e.exports&&(t=e.exports=v),t._=v,v.VERSION="1.7.0";var _=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,a){return e.call(t,n,r,a)};case 4:return function(n,r,a,i){return e.call(t,n,r,a,i)}}return function(){return e.apply(t,arguments)}};v.iteratee=function(e,t,n){return null==e?v.identity:v.isFunction(e)?_(e,t,n):v.isObject(e)?v.matches(e):v.property(e)},v.each=v.forEach=function(e,t,n){if(null==e)return e;t=_(t,n);var r,a=e.length;if(a===+a)for(r=0;a>r;r++)t(e[r],r,e);else{var i=v.keys(e);for(r=0,a=i.length;a>r;r++)t(e[i[r]],i[r],e)}return e},v.map=v.collect=function(e,t,n){if(null==e)return[];t=v.iteratee(t,n);for(var r,a=e.length!==+e.length&&v.keys(e),i=(a||e).length,u=Array(i),s=0;i>s;s++)r=a?a[s]:s,u[s]=t(e[r],r,e);return u};var y="Reduce of empty array with no initial value";v.reduce=v.foldl=v.inject=function(e,t,n,r){null==e&&(e=[]),t=_(t,r,4);var a,i=e.length!==+e.length&&v.keys(e),u=(i||e).length,s=0;if(arguments.length<3){if(!u)throw new TypeError(y);n=e[i?i[s++]:s++]}for(;u>s;s++)a=i?i[s]:s,n=t(n,e[a],a,e);return n},v.reduceRight=v.foldr=function(e,t,n,r){null==e&&(e=[]),t=_(t,r,4);var a,i=e.length!==+e.length&&v.keys(e),u=(i||e).length;if(arguments.length<3){if(!u)throw new TypeError(y);n=e[i?i[--u]:--u]}for(;u--;)a=i?i[u]:u,n=t(n,e[a],a,e);return n},v.find=v.detect=function(e,t,n){var r;return t=v.iteratee(t,n),v.some(e,function(e,n,a){return t(e,n,a)?(r=e,!0):void 0}),r},v.filter=v.select=function(e,t,n){var r=[];return null==e?r:(t=v.iteratee(t,n),v.each(e,function(e,n,a){t(e,n,a)&&r.push(e)}),r)},v.reject=function(e,t,n){return v.filter(e,v.negate(v.iteratee(t)),n)},v.every=v.all=function(e,t,n){if(null==e)return!0;t=v.iteratee(t,n);var r,a,i=e.length!==+e.length&&v.keys(e),u=(i||e).length;for(r=0;u>r;r++)if(a=i?i[r]:r,!t(e[a],a,e))return!1;return!0},v.some=v.any=function(e,t,n){if(null==e)return!1;t=v.iteratee(t,n);var r,a,i=e.length!==+e.length&&v.keys(e),u=(i||e).length;for(r=0;u>r;r++)if(a=i?i[r]:r,t(e[a],a,e))return!0;return!1},v.contains=v.include=function(e,t){return null==e?!1:(e.length!==+e.length&&(e=v.values(e)),v.indexOf(e,t)>=0)},v.invoke=function(e,t){var n=c.call(arguments,2),r=v.isFunction(t);return v.map(e,function(e){return(r?t:e[t]).apply(e,n)})},v.pluck=function(e,t){return v.map(e,v.property(t))},v.where=function(e,t){return v.filter(e,v.matches(t))},v.findWhere=function(e,t){return v.find(e,v.matches(t))},v.max=function(e,t,n){var r,a,i=-1/0,u=-1/0;if(null==t&&null!=e){e=e.length===+e.length?e:v.values(e);for(var s=0,o=e.length;o>s;s++)r=e[s],r>i&&(i=r)}else t=v.iteratee(t,n),v.each(e,function(e,n,r){a=t(e,n,r),(a>u||a===-1/0&&i===-1/0)&&(i=e,u=a)});return i},v.min=function(e,t,n){var r,a,i=1/0,u=1/0;if(null==t&&null!=e){e=e.length===+e.length?e:v.values(e);for(var s=0,o=e.length;o>s;s++)r=e[s],i>r&&(i=r)}else t=v.iteratee(t,n),v.each(e,function(e,n,r){a=t(e,n,r),(u>a||1/0===a&&1/0===i)&&(i=e,u=a)});return i},v.shuffle=function(e){for(var t,n=e&&e.length===+e.length?e:v.values(e),r=n.length,a=Array(r),i=0;r>i;i++)t=v.random(0,i),t!==i&&(a[i]=a[t]),a[t]=n[i];return a},v.sample=function(e,t,n){return null==t||n?(e.length!==+e.length&&(e=v.values(e)),e[v.random(e.length-1)]):v.shuffle(e).slice(0,Math.max(0,t))},v.sortBy=function(e,t,n){return t=v.iteratee(t,n),v.pluck(v.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return e.index-t.index}),"value")};var F=function(e){return function(t,n,r){var a={};return n=v.iteratee(n,r),v.each(t,function(r,i){var u=n(r,i,t);e(a,r,u)}),a}};v.groupBy=F(function(e,t,n){v.has(e,n)?e[n].push(t):e[n]=[t]}),v.indexBy=F(function(e,t,n){e[n]=t}),v.countBy=F(function(e,t,n){v.has(e,n)?e[n]++:e[n]=1}),v.sortedIndex=function(e,t,n,r){n=v.iteratee(n,r,1);for(var a=n(t),i=0,u=e.length;u>i;){var s=i+u>>>1;n(e[s])<a?i=s+1:u=s}return i},v.toArray=function(e){return e?v.isArray(e)?c.call(e):e.length===+e.length?v.map(e,v.identity):v.values(e):[]},v.size=function(e){return null==e?0:e.length===+e.length?e.length:v.keys(e).length},v.partition=function(e,t,n){t=v.iteratee(t,n);var r=[],a=[];return v.each(e,function(e,n,i){(t(e,n,i)?r:a).push(e)}),[r,a]},v.first=v.head=v.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:0>t?[]:c.call(e,0,t)},v.initial=function(e,t,n){return c.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},v.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:c.call(e,Math.max(e.length-t,0))},v.rest=v.tail=v.drop=function(e,t,n){return c.call(e,null==t||n?1:t)},v.compact=function(e){return v.filter(e,v.identity)};var b=function(e,t,n,r){if(t&&v.every(e,v.isArray))return f.apply(r,e);for(var a=0,i=e.length;i>a;a++){var u=e[a];v.isArray(u)||v.isArguments(u)?t?l.apply(r,u):b(u,t,n,r):n||r.push(u)}return r};v.flatten=function(e,t){return b(e,t,!1,[])},v.without=function(e){return v.difference(e,c.call(arguments,1))},v.uniq=v.unique=function(e,t,n,r){if(null==e)return[];v.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=v.iteratee(n,r));for(var a=[],i=[],u=0,s=e.length;s>u;u++){var o=e[u];if(t)u&&i===o||a.push(o),i=o;else if(n){var l=n(o,u,e);v.indexOf(i,l)<0&&(i.push(l),a.push(o))}else v.indexOf(a,o)<0&&a.push(o)}return a},v.union=function(){return v.uniq(b(arguments,!0,!0,[]))},v.intersection=function(e){if(null==e)return[];for(var t=[],n=arguments.length,r=0,a=e.length;a>r;r++){var i=e[r];if(!v.contains(t,i)){for(var u=1;n>u&&v.contains(arguments[u],i);u++);u===n&&t.push(i)}}return t},v.difference=function(e){var t=b(c.call(arguments,1),!0,!0,[]);return v.filter(e,function(e){return!v.contains(t,e)})},v.zip=function(e){if(null==e)return[];for(var t=v.max(arguments,"length").length,n=Array(t),r=0;t>r;r++)n[r]=v.pluck(arguments,r);return n},v.object=function(e,t){if(null==e)return{};for(var n={},r=0,a=e.length;a>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},v.indexOf=function(e,t,n){if(null==e)return-1;var r=0,a=e.length;if(n){if("number"!=typeof n)return r=v.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,a+n):n}for(;a>r;r++)if(e[r]===t)return r;return-1},v.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=e.length;for("number"==typeof n&&(r=0>n?r+n+1:Math.min(r,n+1));--r>=0;)if(e[r]===t)return r;return-1},v.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),a=Array(r),i=0;r>i;i++,e+=n)a[i]=e;return a};var E=function(){};v.bind=function(e,t){var n,r;if(m&&e.bind===m)return m.apply(e,c.call(arguments,1));if(!v.isFunction(e))throw new TypeError("Bind must be called on a function");return n=c.call(arguments,2),r=function(){if(!(this instanceof r))return e.apply(t,n.concat(c.call(arguments)));E.prototype=e.prototype;var a=new E;E.prototype=null;var i=e.apply(a,n.concat(c.call(arguments)));return v.isObject(i)?i:a}},v.partial=function(e){var t=c.call(arguments,1);return function(){for(var n=0,r=t.slice(),a=0,i=r.length;i>a;a++)r[a]===v&&(r[a]=arguments[n++]);for(;n<arguments.length;)r.push(arguments[n++]);return e.apply(this,r)}},v.bindAll=function(e){var t,n,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(t=1;r>t;t++)n=arguments[t],e[n]=v.bind(e[n],e);return e},v.memoize=function(e,t){var n=function(r){var a=n.cache,i=t?t.apply(this,arguments):r;return v.has(a,i)||(a[i]=e.apply(this,arguments)),a[i]};return n.cache={},n},v.delay=function(e,t){var n=c.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},v.defer=function(e){return v.delay.apply(v,[e,1].concat(c.call(arguments,1)))},v.throttle=function(e,t,n){var r,a,i,u=null,s=0;n||(n={});var o=function(){s=n.leading===!1?0:v.now(),u=null,i=e.apply(r,a),u||(r=a=null)};return function(){var l=v.now();s||n.leading!==!1||(s=l);var c=t-(l-s);return r=this,a=arguments,0>=c||c>t?(clearTimeout(u),u=null,s=l,i=e.apply(r,a),u||(r=a=null)):u||n.trailing===!1||(u=setTimeout(o,c)),i}},v.debounce=function(e,t,n){var r,a,i,u,s,o=function(){var l=v.now()-u;t>l&&l>0?r=setTimeout(o,t-l):(r=null,n||(s=e.apply(i,a),r||(i=a=null)))};return function(){i=this,a=arguments,u=v.now();var l=n&&!r;return r||(r=setTimeout(o,t)),l&&(s=e.apply(i,a),i=a=null),s}},v.wrap=function(e,t){return v.partial(t,e)},v.negate=function(e){return function(){return!e.apply(this,arguments)}},v.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},v.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},v.before=function(e,t){var n;return function(){return--e>0?n=t.apply(this,arguments):t=null,n}},v.once=v.partial(v.before,2),v.keys=function(e){if(!v.isObject(e))return[];if(h)return h(e);var t=[];for(var n in e)v.has(e,n)&&t.push(n);return t},v.values=function(e){for(var t=v.keys(e),n=t.length,r=Array(n),a=0;n>a;a++)r[a]=e[t[a]];return r},v.pairs=function(e){for(var t=v.keys(e),n=t.length,r=Array(n),a=0;n>a;a++)r[a]=[t[a],e[t[a]]];return r},v.invert=function(e){for(var t={},n=v.keys(e),r=0,a=n.length;a>r;r++)t[e[n[r]]]=n[r];return t},v.functions=v.methods=function(e){var t=[];for(var n in e)v.isFunction(e[n])&&t.push(n);return t.sort()},v.extend=function(e){if(!v.isObject(e))return e;for(var t,n,r=1,a=arguments.length;a>r;r++){t=arguments[r];for(n in t)p.call(t,n)&&(e[n]=t[n])}return e},v.pick=function(e,t,n){var r,a={};if(null==e)return a;if(v.isFunction(t)){t=_(t,n);for(r in e){var i=e[r];t(i,r,e)&&(a[r]=i)}}else{var u=f.apply([],c.call(arguments,1));e=new Object(e);for(var s=0,o=u.length;o>s;s++)r=u[s],r in e&&(a[r]=e[r])}return a},v.omit=function(e,t,n){if(v.isFunction(t))t=v.negate(t);else{var r=v.map(f.apply([],c.call(arguments,1)),String);t=function(e,t){return!v.contains(r,t)}}return v.pick(e,t,n)},v.defaults=function(e){if(!v.isObject(e))return e;for(var t=1,n=arguments.length;n>t;t++){var r=arguments[t];for(var a in r)void 0===e[a]&&(e[a]=r[a])}return e},v.clone=function(e){return v.isObject(e)?v.isArray(e)?e.slice():v.extend({},e):e},v.tap=function(e,t){return t(e),e};var x=function(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof v&&(e=e._wrapped),t instanceof v&&(t=t._wrapped);var a=d.call(e);if(a!==d.call(t))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}if("object"!=typeof e||"object"!=typeof t)return!1;for(var i=n.length;i--;)if(n[i]===e)return r[i]===t;var u=e.constructor,s=t.constructor;if(u!==s&&"constructor"in e&&"constructor"in t&&!(v.isFunction(u)&&u instanceof u&&v.isFunction(s)&&s instanceof s))return!1;n.push(e),r.push(t);var o,l;if("[object Array]"===a){if(o=e.length,l=o===t.length)for(;o--&&(l=x(e[o],t[o],n,r)););}else{var c,f=v.keys(e);if(o=f.length,l=v.keys(t).length===o)for(;o--&&(c=f[o],l=v.has(t,c)&&x(e[c],t[c],n,r)););}return n.pop(),r.pop(),l};v.isEqual=function(e,t){return x(e,t,[],[])},v.isEmpty=function(e){if(null==e)return!0;if(v.isArray(e)||v.isString(e)||v.isArguments(e))return 0===e.length;for(var t in e)if(v.has(e,t))return!1;return!0},v.isElement=function(e){return!(!e||1!==e.nodeType)},v.isArray=g||function(e){return"[object Array]"===d.call(e)},v.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},v.each(["Arguments","Function","String","Number","Date","RegExp"],function(e){v["is"+e]=function(t){return d.call(t)==="[object "+e+"]"}}),v.isArguments(arguments)||(v.isArguments=function(e){return v.has(e,"callee")}),v.isFunction=function(e){return"function"==typeof e||!1},v.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},v.isNaN=function(e){return v.isNumber(e)&&e!==+e},v.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===d.call(e)},v.isNull=function(e){return null===e},v.isUndefined=function(e){return void 0===e},v.has=function(e,t){return null!=e&&p.call(e,t)},v.noConflict=function(){return a._=i,this},v.identity=function(e){return e},v.constant=function(e){return function(){return e}},v.noop=function(){},v.property=function(e){return function(t){return t[e]}},v.matches=function(e){var t=v.pairs(e),n=t.length;return function(e){if(null==e)return!n;e=new Object(e);for(var r=0;n>r;r++){var a=t[r],i=a[0];if(a[1]!==e[i]||!(i in e))return!1}return!0}},v.times=function(e,t,n){var r=Array(Math.max(0,e));t=_(t,n,1);for(var a=0;e>a;a++)r[a]=t(a);return r},v.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},v.now=Date.now||function(){return(new Date).getTime()};var w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},R=v.invert(w),I=function(e){var t=function(t){return e[t]},n="(?:"+v.keys(e).join("|")+")",r=RegExp(n),a=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(a,t):e}};v.escape=I(w),v.unescape=I(R),v.result=function(e,t){if(null==e)return void 0;var n=e[t];return v.isFunction(n)?e[t]():n};var T=0;v.uniqueId=function(e){var t=++T+"";return e?e+t:t},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var U=/(.)^/,j={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},C=/\\|'|\r|\n|\u2028|\u2029/g,L=function(e){return"\\"+j[e]};v.template=function(e,t,n){!t&&n&&(t=n),t=v.defaults({},t,v.templateSettings);var r=RegExp([(t.escape||U).source,(t.interpolate||U).source,(t.evaluate||U).source].join("|")+"|$","g"),a=0,i="__p+='";e.replace(r,function(t,n,r,u,s){return i+=e.slice(a,s).replace(C,L),a=s+t.length,n?i+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?i+="'+\n((__t=("+r+"))==null?'':__t)+\n'":u&&(i+="';\n"+u+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var u=new Function(t.variable||"obj","_",i)}catch(s){throw s.source=i,s}var o=function(e){return u.call(this,e,v)},l=t.variable||"obj";return o.source="function("+l+"){\n"+i+"}",o},v.chain=function(e){var t=v(e);return t._chain=!0,t};var A=function(e){return this._chain?v(e).chain():e};v.mixin=function(e){v.each(v.functions(e),function(t){var n=v[t]=e[t];v.prototype[t]=function(){var e=[this._wrapped];return l.apply(e,arguments),A.call(this,n.apply(v,e))}})},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=u[e];v.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],A.call(this,n)}}),v.each(["concat","join","slice"],function(e){var t=u[e];v.prototype[e]=function(){return A.call(this,t.apply(this._wrapped,arguments))}}),v.prototype.value=function(){return this._wrapped},n=[],r=function(){return v}.apply(t,n),!(void 0!==r&&(e.exports=r))}).call(this)},function(e){e.exports=angular.module("wp-api-angularjs.services.posts",["restangular"]).factory("$wpApiPosts",["Restangular",function(e){function t(e){return a.getList(e)}function n(e,t){return a.one(e).get(t)}function r(e){return a.post(e)}var a=e.service("posts");return a.$getList=t,a.$get=n,a.$create=r,a}])},function(e){e.exports=angular.module("wp-api-angularjs.services.media",["restangular"]).factory("$wpApiMedia",["Restangular",function(e){function t(e){return a.getList(e)}function n(e,t){return a.one(e).get(t)}function r(e){return a.post(e)}var a=e.service("media");return a.$getList=t,a.$get=n,a.$create=r,a}])},function(e){e.exports=angular.module("wp-api-angularjs.services.users",["restangular"]).factory("$wpApiUsers",["Restangular",function(e){function t(e){return i.getList(e)}function n(e,t){return i.one(e).get(t)}function r(){return n("me")}function a(e){return i.post(e)}var i=e.service("users");return i.$getList=t,i.$get=n,i.$getMe=r,i.$create=a,i}])},function(e){e.exports=angular.module("wp-api-angularjs.services.taxonomies",["restangular"]).factory("$wpApiTaxonomies",["Restangular",function(e){function t(e){return i.getList(e)}function n(e,t){return i.one(e).get(t)}function r(e){return i.one(e).getList("terms")}function a(e,t){return i.one(e).one("terms",t).get()}var i=e.service("taxonomies");return i.$getList=t,i.$get=n,i.$getTermList=r,i.$getTerm=a,i}])},function(){/**
	 * Restful Resources service for AngularJS apps
	 * @version v1.4.0 - 2014-04-25 * @link https://github.com/mgonto/restangular
	 * @author Martin Gontovnikas <martin@gon.to>
	 * @license MIT License, http://www.opensource.org/licenses/MIT
	 */
!function(){var e=angular.module("restangular",[]);e.provider("Restangular",function(){var e={};e.init=function(e,t){function n(e,t,n,r){var a={};return _.each(_.keys(r),function(i){var u=r[i];u.params=_.extend({},u.params,e.defaultRequestParams[u.method.toLowerCase()]),_.isEmpty(u.params)&&delete u.params,a[i]=e.isSafe(u.method)?function(){return t(_.extend(u,{url:n}))}:function(e){return t(_.extend(u,{url:n,data:e}))}}),a}e.configuration=t;var r=["get","head","options","trace","getlist"];t.isSafe=function(e){return _.contains(r,e.toLowerCase())};var a=/^https?:\/\//i;t.isAbsoluteUrl=function(e){return _.isUndefined(t.absoluteUrl)||_.isNull(t.absoluteUrl)?e&&a.test(e):t.absoluteUrl},t.absoluteUrl=_.isUndefined(t.absoluteUrl)?!0:t.absoluteUrl,e.setSelfLinkAbsoluteUrl=function(e){t.absoluteUrl=e},t.baseUrl=_.isUndefined(t.baseUrl)?"":t.baseUrl,e.setBaseUrl=function(e){return t.baseUrl=/\/$/.test(e)?e.substring(0,e.length-1):e,this},t.extraFields=t.extraFields||[],e.setExtraFields=function(e){return t.extraFields=e,this},t.defaultHttpFields=t.defaultHttpFields||{},e.setDefaultHttpFields=function(e){return t.defaultHttpFields=e,this},t.withHttpValues=function(e,n){return _.defaults(n,e,t.defaultHttpFields)},t.encodeIds=_.isUndefined(t.encodeIds)?!0:t.encodeIds,e.setEncodeIds=function(e){t.encodeIds=e},t.defaultRequestParams=t.defaultRequestParams||{get:{},post:{},put:{},remove:{},common:{}},e.setDefaultRequestParams=function(e,n){var r=[],a=n||e;return _.isUndefined(n)?r.push("common"):_.isArray(e)?r=e:r.push(e),_.each(r,function(e){t.defaultRequestParams[e]=a}),this},e.requestParams=t.defaultRequestParams,t.defaultHeaders=t.defaultHeaders||{},e.setDefaultHeaders=function(n){return t.defaultHeaders=n,e.defaultHeaders=t.defaultHeaders,this},e.defaultHeaders=t.defaultHeaders,t.methodOverriders=t.methodOverriders||[],e.setMethodOverriders=function(e){var n=_.extend([],e);return t.isOverridenMethod("delete",n)&&n.push("remove"),t.methodOverriders=n,this},t.jsonp=_.isUndefined(t.jsonp)?!1:t.jsonp,e.setJsonp=function(e){t.jsonp=e},t.isOverridenMethod=function(e,n){var r=n||t.methodOverriders;return!_.isUndefined(_.find(r,function(t){return t.toLowerCase()===e.toLowerCase()}))},t.urlCreator=t.urlCreator||"path",e.setUrlCreator=function(e){if(!_.has(t.urlCreatorFactory,e))throw new Error("URL Path selected isn't valid");return t.urlCreator=e,this},t.restangularFields=t.restangularFields||{id:"id",route:"route",parentResource:"parentResource",restangularCollection:"restangularCollection",cannonicalId:"__cannonicalId",etag:"restangularEtag",selfLink:"href",get:"get",getList:"getList",put:"put",post:"post",remove:"remove",head:"head",trace:"trace",options:"options",patch:"patch",getRestangularUrl:"getRestangularUrl",getRequestedUrl:"getRequestedUrl",putElement:"putElement",addRestangularMethod:"addRestangularMethod",getParentList:"getParentList",clone:"clone",ids:"ids",httpConfig:"_$httpConfig",reqParams:"reqParams",one:"one",all:"all",several:"several",oneUrl:"oneUrl",allUrl:"allUrl",customPUT:"customPUT",customPOST:"customPOST",customDELETE:"customDELETE",customGET:"customGET",customGETLIST:"customGETLIST",customOperation:"customOperation",doPUT:"doPUT",doPOST:"doPOST",doDELETE:"doDELETE",doGET:"doGET",doGETLIST:"doGETLIST",fromServer:"fromServer",withConfig:"withConfig",withHttpConfig:"withHttpConfig",singleOne:"singleOne",plain:"plain",save:"save"},e.setRestangularFields=function(e){return t.restangularFields=_.extend(t.restangularFields,e),this},t.isRestangularized=function(e){return!!e[t.restangularFields.one]||!!e[t.restangularFields.all]},t.setFieldToElem=function(e,t,n){var r=e.split("."),a=t;return _.each(_.initial(r),function(e){a[e]={},a=a[e]}),a[_.last(r)]=n,this},t.getFieldFromElem=function(e,t){var n=e.split("."),r=t;return _.each(n,function(e){r&&(r=r[e])}),angular.copy(r)},t.setIdToElem=function(e,n){return t.setFieldToElem(t.restangularFields.id,e,n),this},t.getIdFromElem=function(e){return t.getFieldFromElem(t.restangularFields.id,e)},t.isValidId=function(e){return""!==e&&!_.isUndefined(e)&&!_.isNull(e)},t.setUrlToElem=function(e,n){return t.setFieldToElem(t.restangularFields.selfLink,e,n),this},t.getUrlFromElem=function(e){return t.getFieldFromElem(t.restangularFields.selfLink,e)},t.useCannonicalId=_.isUndefined(t.useCannonicalId)?!1:t.useCannonicalId,e.setUseCannonicalId=function(e){return t.useCannonicalId=e,this},t.getCannonicalIdFromElem=function(e){var n=e[t.restangularFields.cannonicalId],r=t.isValidId(n)?n:t.getIdFromElem(e);return r},t.responseInterceptors=t.responseInterceptors||[],t.defaultResponseInterceptor=function(e){return e},t.responseExtractor=function(e,n,r,a,i,u){var s=angular.copy(t.responseInterceptors);s.push(t.defaultResponseInterceptor);var o=e;return _.each(s,function(e){o=e(o,n,r,a,i,u)}),o},e.addResponseInterceptor=function(e){return t.responseInterceptors.push(e),this},e.setResponseInterceptor=e.addResponseInterceptor,e.setResponseExtractor=e.addResponseInterceptor,t.requestInterceptors=t.requestInterceptors||[],t.defaultInterceptor=function(e,t,n,r,a,i,u){return{element:e,headers:a,params:i,httpConfig:u}},t.fullRequestInterceptor=function(e,n,r,a,i,u,s){var o=angular.copy(t.requestInterceptors),l=t.defaultInterceptor(e,n,r,a,i,u,s);return _.reduce(o,function(e,t){return _.extend(e,t(e.element,n,r,a,e.headers,e.params,e.httpConfig))},l)},e.addRequestInterceptor=function(e){return t.requestInterceptors.push(function(t,n,r,a,i,u,s){return{headers:i,params:u,element:e(t,n,r,a),httpConfig:s}}),this},e.setRequestInterceptor=e.addRequestInterceptor,e.addFullRequestInterceptor=function(e){return t.requestInterceptors.push(e),this},e.setFullRequestInterceptor=e.addFullRequestInterceptor,t.errorInterceptor=t.errorInterceptor||function(){},e.setErrorInterceptor=function(e){return t.errorInterceptor=e,this},t.onBeforeElemRestangularized=t.onBeforeElemRestangularized||function(e){return e},e.setOnBeforeElemRestangularized=function(e){return t.onBeforeElemRestangularized=e,this},t.onElemRestangularized=t.onElemRestangularized||function(e){return e},e.setOnElemRestangularized=function(e){return t.onElemRestangularized=e,this},t.shouldSaveParent=t.shouldSaveParent||function(){return!0},e.setParentless=function(e){return _.isArray(e)?t.shouldSaveParent=function(t){return!_.contains(e,t)}:_.isBoolean(e)&&(t.shouldSaveParent=function(){return!e}),this},t.suffix=_.isUndefined(t.suffix)?null:t.suffix,e.setRequestSuffix=function(e){return t.suffix=e,this},t.transformers=t.transformers||{},e.addElementTransformer=function(n,r,a){var i=null,u=null;2===arguments.length?u=r:(u=a,i=r);var s=t.transformers[n];return s||(s=t.transformers[n]=[]),s.push(function(e,t){return _.isNull(i)||e==i?u(t):t}),e},e.extendCollection=function(t,n){return e.addElementTransformer(t,!0,n)},e.extendModel=function(t,n){return e.addElementTransformer(t,!1,n)},t.transformElem=function(e,n,r,a,i){if(!i&&!t.transformLocalElements&&!e[t.restangularFields.fromServer])return e;var u=t.transformers[r],s=e;return u&&_.each(u,function(e){s=e(n,s)}),t.onElemRestangularized(s,n,r,a)},t.transformLocalElements=_.isUndefined(t.transformLocalElements)?!1:t.transformLocalElements,e.setTransformOnlyServerElements=function(e){t.transformLocalElements=!e},t.fullResponse=_.isUndefined(t.fullResponse)?!1:t.fullResponse,e.setFullResponse=function(e){return t.fullResponse=e,this},t.urlCreatorFactory={};var i=function(){};i.prototype.setConfig=function(e){return this.config=e,this},i.prototype.parentsArray=function(e){for(var t=[];e;)t.push(e),e=e[this.config.restangularFields.parentResource];return t.reverse()},i.prototype.resource=function(e,r,a,i,u,s,o,l){var c=_.defaults(u||{},this.config.defaultRequestParams.common),f=_.defaults(i||{},this.config.defaultHeaders);o&&(t.isSafe(l)?f["If-None-Match"]=o:f["If-Match"]=o);var d=this.base(e);if(s){var p="";/\/$/.test(d)||(p+="/"),p+=s,d+=p}return this.config.suffix&&-1===d.indexOf(this.config.suffix,d.length-this.config.suffix.length)&&!this.config.getUrlFromElem(e)&&(d+=this.config.suffix),e[this.config.restangularFields.httpConfig]=void 0,n(this.config,r,d,{getList:this.config.withHttpValues(a,{method:"GET",params:c,headers:f}),get:this.config.withHttpValues(a,{method:"GET",params:c,headers:f}),jsonp:this.config.withHttpValues(a,{method:"jsonp",params:c,headers:f}),put:this.config.withHttpValues(a,{method:"PUT",params:c,headers:f}),post:this.config.withHttpValues(a,{method:"POST",params:c,headers:f}),remove:this.config.withHttpValues(a,{method:"DELETE",params:c,headers:f}),head:this.config.withHttpValues(a,{method:"HEAD",params:c,headers:f}),trace:this.config.withHttpValues(a,{method:"TRACE",params:c,headers:f}),options:this.config.withHttpValues(a,{method:"OPTIONS",params:c,headers:f}),patch:this.config.withHttpValues(a,{method:"PATCH",params:c,headers:f})})};var u=function(){};u.prototype=new i,u.prototype.base=function(e){var n=this;return _.reduce(this.parentsArray(e),function(e,r){var a,i=n.config.getUrlFromElem(r);if(i){if(n.config.isAbsoluteUrl(i))return i;a=i}else if(a=r[n.config.restangularFields.route],r[n.config.restangularFields.restangularCollection]){var u=r[n.config.restangularFields.ids];u&&(a+="/"+u.join(","))}else{var s;s=n.config.useCannonicalId?n.config.getCannonicalIdFromElem(r):n.config.getIdFromElem(r),t.isValidId(s)&&!r.singleOne&&(a+="/"+(n.config.encodeIds?encodeURIComponent(s):s))}return e.replace(/\/$/,"")+"/"+a},this.config.baseUrl)},u.prototype.fetchUrl=function(e,t){var n=this.base(e);return t&&(n+="/"+t),n},u.prototype.fetchRequestedUrl=function(e,n){function r(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t.sort()}function a(e,t,n){for(var a=r(e),i=0;i<a.length;i++)t.call(n,e[a[i]],a[i]);return a}function i(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,t?"%20":"+")}var u=this.fetchUrl(e,n),s=e[t.restangularFields.reqParams];if(!s)return u;var o=[];return a(s,function(e,t){null!=e&&void 0!=e&&(angular.isArray(e)||(e=[e]),angular.forEach(e,function(e){angular.isObject(e)&&(e=angular.toJson(e)),o.push(i(t)+"="+i(e))}))}),u+(this.config.suffix||"")+(-1===u.indexOf("?")?"?":"&")+o.join("&")},t.urlCreatorFactory.path=u};var t={};e.init(this,t),this.$get=["$http","$q",function(n,r){function a(t){function i(e,n,r,a,i){if(n[t.restangularFields.route]=r,n[t.restangularFields.getRestangularUrl]=_.bind(B.fetchUrl,B,n),n[t.restangularFields.getRequestedUrl]=_.bind(B.fetchRequestedUrl,B,n),n[t.restangularFields.addRestangularMethod]=_.bind(H,n),n[t.restangularFields.clone]=_.bind(v,n,n),n[t.restangularFields.reqParams]=_.isEmpty(a)?null:a,n[t.restangularFields.withHttpConfig]=_.bind(I,n),n[t.restangularFields.plain]=_.bind(h,n,n),n[t.restangularFields.one]=_.bind(u,n,n),n[t.restangularFields.all]=_.bind(s,n,n),n[t.restangularFields.several]=_.bind(o,n,n),n[t.restangularFields.oneUrl]=_.bind(l,n,n),n[t.restangularFields.allUrl]=_.bind(c,n,n),n[t.restangularFields.fromServer]=!!i,e&&t.shouldSaveParent(r)){var f=t.getIdFromElem(e),d=t.getUrlFromElem(e),p=_.union(_.values(_.pick(t.restangularFields,["route","singleOne","parentResource"])),t.extraFields),g=_.pick(e,p);t.isValidId(f)&&t.setIdToElem(g,f),t.isValidId(d)&&t.setUrlToElem(g,d),n[t.restangularFields.parentResource]=g}else n[t.restangularFields.parentResource]=null;return n}function u(e,n,r,a){if(_.isNumber(n)||_.isNumber(e)){var i="You're creating a Restangular entity with the number ";throw i+="instead of the route or the parent. You can't call .one(12)",new Error(i)}var u={};return t.setIdToElem(u,r),t.setFieldToElem(t.restangularFields.singleOne,u,a),y(e,u,n,!1)}function s(e,t){return F(e,[],t,!1)}function o(e,n){var r=[];return r[t.restangularFields.ids]=Array.prototype.splice.call(arguments,2),F(e,r,n,!1)}function l(e,n,r){if(!n)throw new Error("Route is mandatory when creating new Restangular objects.");var a={};return t.setUrlToElem(a,r,n),y(e,a,n,!1)}function c(e,n,r){if(!n)throw new Error("Route is mandatory when creating new Restangular objects.");var a={};return t.setUrlToElem(a,r,n),F(e,a,n,!1)}function f(e,n,r){return e.call=_.bind(d,e),e.get=_.bind(p,e),e[t.restangularFields.restangularCollection]=n,n&&(e.push=_.bind(d,e,"push")),e.$object=r,e}function d(e){var n=r.defer(),a=arguments,i={};return this.then(function(t){var r=Array.prototype.slice.call(a,1),u=t[e];u.apply(t,r),i=t,n.resolve(t)}),f(n.promise,this[t.restangularFields.restangularCollection],i)}function p(e){var n=r.defer(),a={};return this.then(function(t){a=t[e],n.resolve(a)}),f(n.promise,this[t.restangularFields.restangularCollection],a)}function g(e,n,r,a){return _.extend(a,r),t.fullResponse?e.resolve(_.extend(n,{data:r})):void e.resolve(r)}function h(e){if(_.isArray(e)){var n=[];return _.each(e,function(e){n.push(h(e))}),n}return _.omit(e,_.values(_.omit(t.restangularFields,"id")))}function m(e){e[t.restangularFields.customOperation]=_.bind(q,e),_.each(["put","post","get","delete"],function(t){_.each(["do","custom"],function(n){var r,a="delete"===t?"remove":t,i=n+t.toUpperCase();r="put"!==a&&"post"!==a?q:function(e,t,n,r,a){return _.bind(q,this)(e,n,r,a,t)},e[i]=_.bind(r,e,a)})}),e[t.restangularFields.customGETLIST]=_.bind(R,e),e[t.restangularFields.doGETLIST]=e[t.restangularFields.customGETLIST]}function v(e,n){var r=angular.copy(e,n);return y(r[t.restangularFields.parentResource],r,r[t.restangularFields.route],!0)}function y(e,n,r,a,u,s){var o=t.onBeforeElemRestangularized(n,!1,r),l=i(e,o,r,s,a);return t.useCannonicalId&&(l[t.restangularFields.cannonicalId]=t.getIdFromElem(l)),u&&(l[t.restangularFields.getParentList]=function(){return u}),l[t.restangularFields.restangularCollection]=!1,l[t.restangularFields.get]=_.bind(j,l),l[t.restangularFields.getList]=_.bind(R,l),l[t.restangularFields.put]=_.bind(L,l),l[t.restangularFields.post]=_.bind(A,l),l[t.restangularFields.remove]=_.bind(C,l),l[t.restangularFields.head]=_.bind(O,l),l[t.restangularFields.trace]=_.bind($,l),l[t.restangularFields.options]=_.bind(S,l),l[t.restangularFields.patch]=_.bind(P,l),l[t.restangularFields.save]=_.bind(T,l),m(l),t.transformElem(l,!1,r,z,!0)}function F(e,n,r,a,u){var s=t.onBeforeElemRestangularized(n,!0,r),o=i(e,s,r,u,a);return o[t.restangularFields.restangularCollection]=!0,o[t.restangularFields.post]=_.bind(A,o,null),o[t.restangularFields.remove]=_.bind(C,o),o[t.restangularFields.head]=_.bind(O,o),o[t.restangularFields.trace]=_.bind($,o),o[t.restangularFields.putElement]=_.bind(x,o),o[t.restangularFields.options]=_.bind(S,o),o[t.restangularFields.patch]=_.bind(P,o),o[t.restangularFields.get]=_.bind(E,o),o[t.restangularFields.getList]=_.bind(R,o,null),m(o),t.transformElem(o,!0,r,z,!0)}function b(e,t,n){var r=F(e,t,n,!1);return _.each(r,function(t){y(e,t,n,!1)}),r}function E(e,t,n){return this.customGET(e.toString(),t,n)}function x(e,n,a){var i=this,u=this[e],s=r.defer(),o=[];return o=t.transformElem(o,!0,u[t.restangularFields.route],z),u.put(n,a).then(function(t){var n=v(i);n[e]=t,o=n,s.resolve(n)},function(e){s.reject(e)}),f(s.promise,!0,o)}function w(e,n,r,a,i,u){var s=t.responseExtractor(e,n,r,a,i,u),o=i.headers("ETag");return s&&o&&(s[t.restangularFields.etag]=o),s}function R(e,a,i){var u=this,s=r.defer(),o="getList",l=B.fetchUrl(this,e),c=e||u[t.restangularFields.route],d=t.fullRequestInterceptor(null,o,c,l,i||{},a||{},this[t.restangularFields.httpConfig]||{}),p=[];p=t.transformElem(p,!0,c,z);var h="getList";return t.jsonp&&(h="jsonp"),B.resource(this,n,d.httpConfig,d.headers,d.params,e,this[t.restangularFields.etag],o)[h]().then(function(n){var r=n.data,a=n.config.params,i=w(r,o,c,l,n,s);if((_.isUndefined(i)||""===i)&&(i=[]),!_.isArray(i))throw new Error("Response for getList SHOULD be an array and not an object or something else");var f=_.map(i,function(n){return u[t.restangularFields.restangularCollection]?y(u[t.restangularFields.parentResource],n,u[t.restangularFields.route],!0,i):y(u,n,e,!0,i)});f=_.extend(i,f),u[t.restangularFields.restangularCollection]?g(s,n,F(u[t.restangularFields.parentResource],f,u[t.restangularFields.route],!0,a),p):g(s,n,F(u,f,e,!0,a),p)},function(e){304===e.status&&u[t.restangularFields.restangularCollection]?g(s,e,u,p):t.errorInterceptor(e,s)!==!1&&s.reject(e)}),f(s.promise,!0,p)}function I(e){return this[t.restangularFields.httpConfig]=e,this}function T(e,n){return this[t.restangularFields.fromServer]?this[t.restangularFields.put](e,n):_.bind(U,this)("post",void 0,e,void 0,n)}function U(e,a,i,u,s){var o=this,l=r.defer(),c=i||{},d=a||this[t.restangularFields.route],p=B.fetchUrl(this,a),m=u||this,v=m[t.restangularFields.etag]||("post"!=e?this[t.restangularFields.etag]:null);_.isObject(m)&&t.isRestangularized(m)&&(m=h(m));var F=t.fullRequestInterceptor(m,e,d,p,s||{},c||{},this[t.restangularFields.httpConfig]||{}),b={};b=t.transformElem(b,!1,d,z);var E=function(n){var r=n.data,i=n.config.params,u=w(r,e,d,p,n,l);u?"post"!==e||o[t.restangularFields.restangularCollection]?(data=y(o[t.restangularFields.parentResource],u,o[t.restangularFields.route],!0,null,i),data[t.restangularFields.singleOne]=o[t.restangularFields.singleOne],g(l,n,data,b)):g(l,n,y(o,u,a,!0,null,i),b):g(l,n,void 0,b)},x=function(n){304===n.status&&t.isSafe(e)?g(l,n,o,b):t.errorInterceptor(n,l)!==!1&&l.reject(n)},R=e,I=_.extend({},F.headers),T=t.isOverridenMethod(e);return T?(R="post",I=_.extend(I,{"X-HTTP-Method-Override":"remove"===e?"DELETE":e})):t.jsonp&&"get"===R&&(R="jsonp"),t.isSafe(e)?T?B.resource(this,n,F.httpConfig,I,F.params,a,v,R)[R]({}).then(E,x):B.resource(this,n,F.httpConfig,I,F.params,a,v,R)[R]().then(E,x):B.resource(this,n,F.httpConfig,I,F.params,a,v,R)[R](F.element).then(E,x),f(l.promise,!1,b)}function j(e,t){return _.bind(U,this)("get",void 0,e,void 0,t)}function C(e,t){return _.bind(U,this)("remove",void 0,e,void 0,t)}function L(e,t){return _.bind(U,this)("put",void 0,e,void 0,t)}function A(e,t,n,r){return _.bind(U,this)("post",e,n,t,r)}function O(e,t){return _.bind(U,this)("head",void 0,e,void 0,t)}function $(e,t){return _.bind(U,this)("trace",void 0,e,void 0,t)}function S(e,t){return _.bind(U,this)("options",void 0,e,void 0,t)}function P(e,t,n){return _.bind(U,this)("patch",void 0,t,e,n)}function q(e,t,n,r,a){return _.bind(U,this)(e,t,n,a,r)}function H(e,n,r,a,i,u){var s;s="getList"===n?_.bind(R,this,r):_.bind(q,this,n,r);var o=function(e,t,n){var r=_.defaults({params:e,headers:t,elem:n},{params:a,headers:i,elem:u});return s(r.params,r.headers,r.elem)};this[e]=t.isSafe(n)?o:function(e,t,n){return o(t,n,e)}}function k(n){var r=angular.copy(_.omit(t,"configuration"));return e.init(r,r),n(r),a(r)}function M(e,t){var n={},r=(t||z).all(e);return n.one=_.bind(u,t||z,t,e),n.post=_.bind(r.post,r),n.getList=_.bind(r.getList,r),n}var z={},B=new t.urlCreatorFactory[t.urlCreator];return B.setConfig(t),e.init(z,t),z.copy=_.bind(v,z),z.service=_.bind(M,z),z.withConfig=_.bind(k,z),z.one=_.bind(u,z,null),z.all=_.bind(s,z,null),z.several=_.bind(o,z,null),z.oneUrl=_.bind(l,z,null),z.allUrl=_.bind(c,z,null),z.stripRestangular=_.bind(h,z),z.restangularizeElement=_.bind(y,z),z.restangularizeCollection=_.bind(b,z),z}return a(t)}]})}()}]);